var ebLib=function(exports){'use strict';function iframeListener(){window.addEventListener('message',(function(e){try{if(e.origin.indexOf('ekstrabladet.dk')!==-1&&typeof e.data!=='undefined'&&typeof e.data==='string'){var message=e.data.indexOf(',')!==-1?e.data.split(','):[];var data={};for(var _i=0,message_1=message;_i<message_1.length;_i++){var msg=message_1[_i];if(msg.indexOf(':')!==-1){var f=msg.split(':');data[f[0]]=f[1]}}if(!data.token){return}if(data.token.substr(0,1)==='#'){data.token=data.token.substr(1)}var iframe=document.getElementById(data.token);if(!iframe){return}if('height'in data){iframe.style.height=data.height+'px'}if('scrollIntoView'in data){iframe.scrollIntoView(data.scrollIntoView)}}}catch(err){console.error('listen message ',err)}}))}var __assign=function(){__assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s)if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}return t};return __assign.apply(this,arguments)};function __awaiter(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator['throw'](value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))}function __generator(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1]},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),throw:verb(1),return:verb(2)},typeof Symbol==='function'&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return step([n,v])}}function step(op){if(f)throw new TypeError('Generator is already executing.');while(_)try{if(f=1,y&&(t=op[0]&2?y['return']:op[0]?y['throw']||((t=y['return'])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break}if(t[2])_.ops.pop();_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e];y=0}finally{f=t=0}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true}}}function expand(e,settings){var clickedButton=e.currentTarget;var parent=clickedButton.parentNode;if(parent!==null&&parent.className.indexOf(settings.wrapperSelector)!==-1){var expandChild=parent.querySelector('.'+settings.expandable);if(settings.calculated===false){expandChild.className=expandChild.className.replace(settings.expandable,settings.expanded)}else{expandChild.className=expandChild.className.replace(settings.expandable,'');expandChild.style.maxHeight=expandChild.dataset.maxheight+'px'}var expandChildAfter=parent.querySelector('.'+settings.expandable);if(expandChildAfter===null){clickedButton.style.opacity=0}}}function calculateHeight(settings){var containers=document.querySelectorAll('.'+settings.wrapperSelector);for(var i=containers.length;i--;){var container=containers[i];var expandItems=container.querySelectorAll('.'+settings.expandable);for(var j=expandItems.length;j--;){var expandItem=expandItems[i];expandItem.classList.remove('transition-expand');expandItem.dataset.maxheight=expandItem.clientHeight.toString();expandItem.setAttribute('data-maxheight',expandItem.clientHeight.toString());expandItem.classList.add('transition-expand')}}}function listExpand(options){var defaults={buttonSelector:'fnListMore',calculated:false,expandable:'fnExpandable',expanded:'transition-expanded',wrapperSelector:'fnExpandContainer'};var settings=typeof options==='undefined'?defaults:__assign(__assign({},defaults),options);var buttons=document.querySelectorAll('.'+settings.buttonSelector);for(var i=buttons.length;i--;){buttons[i].addEventListener('click',(function(e){expand(e,settings)}))}if(settings.calculated){calculateHeight(settings)}}function parseDate(datetime){var monthNames=['jan','feb','mar','apr','maj','jun','jul','aug','sep','okt','nov','dec'];var inputdate=new Date(datetime);var now=new Date;var inputDateLocalTz=new Date(inputdate.getTime()+now.getTimezoneOffset()*60);var secondsSince=Math.round((now.getTime()-inputDateLocalTz.getTime())/1e3);var days=Math.floor(secondsSince/86400);var output='';if(days){var yesterday=new Date(now.getFullYear(),now.getMonth(),now.getDate()-1);if(inputDateLocalTz.getTime()>yesterday.getTime()){output='I g√•r'}else{output=inputDateLocalTz.getDate()+'. '+monthNames[inputDateLocalTz.getMonth()]+'.'+(now.getFullYear()!==inputDateLocalTz.getFullYear()?' '+inputDateLocalTz.getFullYear():'')}}else{var hours=Math.floor(secondsSince%86400/3600);var minutes=Math.floor(secondsSince%86400%3600/60);var seconds=secondsSince%60;if(hours){output=hours===1?hours+' time':hours+' timer'}else if(minutes){output=minutes+' min'}else if(seconds){output=seconds+' sek'}}return output}function populateDates(){var dateElems=document.querySelectorAll('[data-updatetime="true"][data-timestamp]');dateElems.forEach((function(dateElem){var datasetTimestamp=dateElem.dataset.timestamp;var formattedDate=parseDate(datasetTimestamp);if(formattedDate){dateElem.innerText=formattedDate}}))}function handleError(message){if(window.ebLog){window.ebLog({component:'saveArticles',level:'ERROR',message:message})}else{console.error(message)}}function saveFunctionToggleSave(articleId,checkbox){return __awaiter(this,void 0,void 0,(function(){var toggleSaveResp,_a;return __generator(this,(function(_b){switch(_b.label){case 0:if(!checkbox.checked)return[3,2];return[4,window.mitEb.saveArticle(articleId)];case 1:_a=_b.sent();return[3,4];case 2:return[4,window.mitEb.deleteArticle(articleId)];case 3:_a=_b.sent();_b.label=4;case 4:toggleSaveResp=_a;if(!toggleSaveResp.success){checkbox.checked=!checkbox.checked;handleError('MitEB - Error saving or deleting article with id: '+articleId)}return[2,toggleSaveResp.success]}}))}))}function prepareSaveButtons(buttonElems){return __awaiter(this,void 0,void 0,(function(){var savedArticlesResp;var _this=this;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,window.mitEb.getSavedIds()];case 1:savedArticlesResp=_a.sent();if(savedArticlesResp.success){buttonElems.forEach((function(inputElem){var articleId=Number(inputElem.dataset.savearticleid);inputElem.checked=savedArticlesResp.data.includes(articleId);inputElem.parentElement.classList.remove('save-toggle--disabled');inputElem.addEventListener('change',saveFunctionToggleSave.bind(_this,articleId,inputElem))}))}else{handleError('MitEB - Error fetching array with saved articles')}return[2]}}))}))}function saveFunction(saveArticleInputElems){if(saveArticleInputElems===void 0){saveArticleInputElems=document.querySelectorAll('input[data-savearticleid]')}if(saveArticleInputElems.length&&window.mitEb){prepareSaveButtons(saveArticleInputElems)}}function transitionExpand(){var cbExpandElems=document.querySelectorAll('input.cb-expand');cbExpandElems.forEach((function(elem){elem.addEventListener('change',(function(ev){var inputCheckboxElem=ev.target;if(!inputCheckboxElem.checked){var header=document.querySelector('.navmenu-container');var bodyYPos=document.body.getBoundingClientRect().top;var parentYPos=inputCheckboxElem.parentElement.getBoundingClientRect().top-bodyYPos;var targetYPos=parentYPos-header.offsetHeight;window.scrollTo({behavior:'smooth',top:targetYPos})}}))}))}function triggerEvent(el,eventName,options){var event;if(typeof CustomEvent==='function'){event=new CustomEvent(eventName,options)}else if('createEvent'in document){event=document.createEvent('HTMLEvents');event.initEvent(eventName,true,true);if(typeof options!=='undefined'){event.detail=options.detail}}event.eventName=eventName;if(el.dispatchEvent){el.dispatchEvent(event)}else if(el[eventName]){el[eventName]()}}var options=window.ebJS.options;var InitEBMainJS=function(){function InitEBMainJS(){var _this=this;triggerEvent(window,'isEBJSReady');options.isEBJSReady=true;if(document.readyState==='complete'){this.contentLoaded()}else{document.addEventListener('readystatechange',(function(){if(document.readyState==='complete'){_this.contentLoaded()}}))}iframeListener()}InitEBMainJS.prototype.contentLoaded=function(){var _this=this;triggerEvent(window,'isEBDocReady');options.isEBDocReady=true;triggerEvent(window,'isEBReady');options.isEBReady=true;populateDates();var raf=window.requestAnimationFrame;if(raf){raf((function(){_this.loadDeferredStylesheet()}))}else{this.loadDeferredStylesheet()}listExpand();saveFunction();populateDates();transitionExpand()};InitEBMainJS.prototype.loadDeferredStylesheet=function(){try{var addStylesNode=document.getElementById('deferred-styles');if(addStylesNode===null){return}else{var replacement=document.createElement('div');replacement.innerHTML=addStylesNode.textContent;document.body.appendChild(replacement);addStylesNode.parentElement.removeChild(addStylesNode)}}catch(err){console.error('loadDeferredStyles',err)}};return InitEBMainJS}();var chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=';function getUserFromCookie(){var isTest=options.environment==='DEVELOPMENT'||options.environment==='TEST';var cookieRegExpStr='ebuser';if(isTest){cookieRegExpStr='ebusertest'}var cookieRegExp=new RegExp('\\b'+cookieRegExpStr+'=[^\\|]+[|]([^;]+)');var r=cookieRegExp.exec(document.cookie);if(r&&r[1]){var str=r[1];if(window.atob){return JSON.parse(window.atob(str))}var c1=void 0;var c2=void 0;var c3=void 0;var e1=void 0;var e2=void 0;var e3=void 0;var e4=void 0;var o='';var n=0;var i=str.replace(/[^A-Za-z0-9\-_]/g,'');while(i.length%4!==0){i+='='}while(n<i.length){e1=chars.indexOf(i.charAt(n++));e2=chars.indexOf(i.charAt(n++));e3=chars.indexOf(i.charAt(n++));e4=chars.indexOf(i.charAt(n++));c1=e1<<2|e2>>4;c2=(e2&15)<<4|e3>>2;c3=(e3&3)<<6|e4;o+=String.fromCharCode(c1);if(e3!==64){o+=String.fromCharCode(c2)}if(e4!==64){o+=String.fromCharCode(c3)}}return JSON.parse(o)}return null}function currentUser(){return getUserFromCookie()}var handlerTimeOut=50;var didScroll=false;var prevScrollTop=0;var prevScrollLeft=0;var isRunning=false;function scrollHandler(){if(!isRunning){isRunning=true;window.addEventListener('scroll',(function(){didScroll=true}))}}setInterval((function(){try{if(didScroll){didScroll=false;var scrolltop=window.pageYOffset||document.documentElement&&document.documentElement.scrollTop;var dir='';if(scrolltop>prevScrollTop){dir='south'}else if(scrolltop<prevScrollTop){dir='north'}else{var scrollleft=window.pageXOffset||document.documentElement&&document.documentElement.scrollLeft;if(scrollleft>prevScrollLeft){dir='east'}else if(scrollleft<prevScrollLeft){dir='west'}prevScrollLeft=scrollleft}triggerEvent(window,'scrollUpdate',{detail:{dir:dir,pos:scrolltop}});prevScrollTop=scrolltop}}catch(err){console.error('scroll interval '+err)}}),handlerTimeOut);var StickyMenu=function(){function StickyMenu(menuId,wireframeId,options){if(menuId===void 0){menuId='fnTopnavigation'}if(options===void 0){options={}}this.isSticky=false;this.prevPos=0;this.retryCount=0;this.stickyMenuElement=null;this.stickyPoint=0;this.options={bodyToggleClass:'js-activeFixedMenu',offset:0,toggleClass:'js-smallMenu'};this.menuId=menuId;this.wireframeId=wireframeId;this.options=__assign(__assign({},this.options),options);this.init()}StickyMenu.prototype.registerElement=function(eleId){var newElement=document.getElementById(eleId);if(newElement!==null){this.stickyPoint=this.stickyPoint+newElement.clientHeight;this.updateMenuPosition('south',this.prevPos)}};StickyMenu.prototype.init=function(){var _this=this;this.stickyMenuElement=document.getElementById(this.menuId);var ebWireframe=document.getElementById(this.wireframeId);if(this.stickyMenuElement!==null&&ebWireframe!==null){this.stickyPoint=this.stickyMenuElement.offsetTop+ebWireframe.offsetTop+this.options.offset;scrollHandler();window.addEventListener('scrollUpdate',(function(e){_this.updateMenuPosition(e.detail.dir,e.detail.pos)}),false)}else if(this.retryCount<2){this.retryCount++;setTimeout((function(){_this.init()}),1e3)}};StickyMenu.prototype.updateMenuPosition=function(dir,pos){try{this.prevPos=pos;if(dir==='south'&&pos>=this.stickyPoint&&this.isSticky===false){this.isSticky=true;this.stickyMenuElement.classList.toggle(this.options.toggleClass);document.body.classList.add(this.options.bodyToggleClass)}else if(dir==='north'&&pos<=this.stickyPoint&&this.isSticky===true){this.isSticky=false;this.stickyMenuElement.classList.toggle(this.options.toggleClass);document.body.classList.remove(this.options.bodyToggleClass)}}catch(err){console.error('StickyMenu.ts updateMenuPosition',err)}};return StickyMenu}();var Calendar=function(){function Calendar(elId,dateFormat,minimumAge){this.dateFormat='YYYY-MM-DD';this.initCalender(elId,dateFormat,minimumAge)}Calendar.prototype.initCalender=function(elId,dateFormat,minimumAge){var _this=this;try{this.inputElement=document.getElementById(elId);if(this.inputElement===null){return}this.dateFormat=dateFormat||'YYYY-MM-DD';this.dateRegEx=this.createDateRegEx(this.dateFormat);this.minimumAge=minimumAge||0;this.calContainer=document.createElement('div');this.calContainer.id='cal'+elId;this.calContainer.className='calendar';var date=new Date;var currentDate={day:date.getDate(),month:date.getMonth(),year:date.getFullYear()-this.minimumAge};this.currentDate=currentDate;this.currentCalendarDate={day:currentDate.day,month:currentDate.month,year:currentDate.year};this.createCalendar();this.inputElement.addEventListener('focus',(function(ev){_this.showCalendar(ev.currentTarget.value)}));this.inputElement.addEventListener('blur',(function(){_this.blurredInput()}))}catch(err){console.error('calendar init',err)}};Calendar.prototype.createCalendar=function(dateArgument){var _this=this;try{var calendarDate=dateArgument||this.currentDate;var setCurrent=!!dateArgument;var docFrag=document.createDocumentFragment();var yearEl=document.createElement('div');yearEl.className='year';yearEl.appendChild(this.createYearLine(calendarDate.year));docFrag.appendChild(yearEl);var monthEl=document.createElement('div');monthEl.className='month';monthEl.appendChild(this.createMonthLine(calendarDate.month));docFrag.appendChild(monthEl);var datesEl=document.createElement('div');datesEl.className='dates';datesEl.appendChild(this.createDatePicker(calendarDate,setCurrent));docFrag.appendChild(datesEl);datesEl.addEventListener('click',(function(e){_this.datesClicked(e)}));this.datesEl=datesEl;while(this.calContainer.firstChild){this.calContainer.removeChild(this.calContainer.firstChild)}this.calContainer.appendChild(docFrag)}catch(err){console.error('calendar createCalendar',err)}};Calendar.prototype.showCalendar=function(currentValue){try{if(currentValue!==''&&currentValue.match(this.dateRegEx)){var currentValueSplit=currentValue.split('-');var newDate={day:parseFloat(currentValueSplit[0]),month:parseFloat(currentValueSplit[1])-1,year:parseFloat(currentValueSplit[2])};this.createCalendar(newDate)}else{this.inputElement.value=''}document.body.appendChild(this.calContainer);var topPos=this.getCalendarTopPosition(this.inputElement);var leftPos=this.inputElement.getBoundingClientRect().left;var styleStr='z-index:9999;opacity:1;position:absolute;left: '+leftPos+'px;top:'+(topPos+this.inputElement.clientHeight)+'px;';this.calContainer.setAttribute('style',styleStr)}catch(err){console.error('calendar showCalendar',err)}};Calendar.prototype.hideCalendar=function(){var _this=this;try{clearTimeout(this.removeTimeout);this.calContainer.style.opacity='0';this.removeTimeout=setTimeout((function(){if(_this.calContainer!==null&&_this.calContainer.parentNode!==null){_this.calContainer.parentNode.removeChild(_this.calContainer)}}),300)}catch(err){console.error('calendar hideCalendar',err)}};Calendar.prototype.blurredInput=function(){var _this=this;try{this.removeTimeout=setTimeout((function(){_this.hideCalendar()}),500)}catch(err){console.error('calendar blurredInput',err)}};Calendar.prototype.updateYear=function(dir){try{clearTimeout(this.removeTimeout);this.updateYearText(dir);this.updateDays()}catch(err){console.error('calendar updateYear',err)}};Calendar.prototype.updateYearText=function(dir){try{var canGoForward=this.currentCalendarDate.year!==this.currentDate.year;if(dir==='back'){this.currentCalendarDate.year=this.currentCalendarDate.year-1}else if(canGoForward){this.currentCalendarDate.year=this.currentCalendarDate.year+1}else if(!canGoForward){return}this.yearTextEl.innerHTML=String(this.currentCalendarDate.year)}catch(err){console.error('calendar updateYearText',err)}};Calendar.prototype.createYearLine=function(year){var _this=this;try{var docFrag=document.createDocumentFragment();var yearback=document.createElement('div');yearback.innerHTML='<';yearback.className='yearnav yearnav--btn';docFrag.appendChild(yearback);yearback.addEventListener('click',(function(){_this.updateYear('back')}));var yearTextEl=document.createElement('div');this.yearTextEl=yearTextEl;yearTextEl.innerHTML=String(year);yearTextEl.className='yearnav';docFrag.appendChild(yearTextEl);var yearforward=document.createElement('div');yearforward.innerHTML='>';yearforward.className='yearnav yearnav--btn';docFrag.appendChild(yearforward);yearforward.addEventListener('click',(function(){_this.updateYear('forward')}));return docFrag}catch(err){console.error('calendar createYearLine',err)}};Calendar.prototype.updateMonth=function(dir){try{clearTimeout(this.removeTimeout);var canGoForward=this.currentCalendarDate.month!==this.currentDate.month||this.currentCalendarDate.month===this.currentDate.month&&this.currentCalendarDate.year!==this.currentDate.year;if(dir==='back'){if(this.currentCalendarDate.month===0){this.currentCalendarDate.month=11;this.updateYearText('back')}else{this.currentCalendarDate.month=this.currentCalendarDate.month-1}}else if(canGoForward){if(this.currentCalendarDate.month===11){this.currentCalendarDate.month=0;this.updateYearText('forward')}else{this.currentCalendarDate.month=this.currentCalendarDate.month+1}}else if(!canGoForward){return}this.monthTextEl.innerHTML=this.monthText(this.currentCalendarDate.month);this.updateDays()}catch(err){console.error('calendar updateMonth',err)}};Calendar.prototype.createMonthLine=function(month){var _this=this;try{var monthTexting=this.monthText(month);var docFrag=document.createDocumentFragment();var back=document.createElement('div');back.innerHTML='<';back.className='monthnav monthnav--btn';docFrag.appendChild(back);back.addEventListener('click',(function(){_this.updateMonth('back')}));var monthTextEl=document.createElement('div');this.monthTextEl=monthTextEl;monthTextEl.innerHTML=monthTexting;monthTextEl.className='monthnav';docFrag.appendChild(monthTextEl);var forward=document.createElement('div');forward.innerHTML='>';forward.className='monthnav monthnav--btn';docFrag.appendChild(forward);forward.addEventListener('click',(function(){_this.updateMonth('forward')}));return docFrag}catch(err){console.error('calendar createMonthLine',err)}};Calendar.prototype.monthText=function(month){var monthNames=['Januar','Februar','Marts','April','Maj','Juni','Juli','August','September','Oktober','November','December'];return monthNames[month]};Calendar.prototype.updateDays=function(newDate){try{if(typeof newDate!=='undefined'){this.currentCalendarDate=newDate}var newCal=this.createDatePicker(this.currentCalendarDate);while(this.datesEl.firstChild){this.datesEl.removeChild(this.datesEl.firstChild)}this.datesEl.appendChild(newCal)}catch(err){console.error('calendar updateDays',err)}};Calendar.prototype.getDayCount=function(month,year){var dayNum;if(month===1){dayNum=(year-2016)%4===0?29:28}else if(month===0||month===2||month===4||month===6||month===7||month===9||month===11){dayNum=31}else{dayNum=30}return dayNum};Calendar.prototype.createDatePicker=function(currentDateArg,setCurrent){try{var day=currentDateArg.day;var month=currentDateArg.month;var year=currentDateArg.year;var dayCount=this.getDayCount(month,year);var prevDayCount=this.getDayCount(month-1,year);var whereToStart=this.getWeekDays(month,year)===0?6:this.getWeekDays(month,year)-1;var docFrag=document.createDocumentFragment();docFrag.appendChild(this.createDayLabels());for(var i=prevDayCount-(whereToStart-1);i<=prevDayCount;i++){var dayEl=document.createElement('div');dayEl.className='day';dayEl.innerHTML=''+i;docFrag.appendChild(dayEl)}for(var j=1;j<=dayCount;j++){var dayEl=document.createElement('div');dayEl.className='day day--inmonth';var dayStr=j<10?'0'+j:String(j);var realMonth=month+1;var monthStr=realMonth<10?'0'+realMonth:String(realMonth);dayEl.dataset.date=this.formatValue(year,monthStr,dayStr,this.dateFormat);dayEl.innerHTML=''+j;if(j===day&&setCurrent){dayEl.classList.add('active')}if(j===this.currentDate.day&&year===this.currentDate.year&&month===this.currentDate.month){dayEl.classList.add('today')}docFrag.appendChild(dayEl)}var addAtEnd=Math.ceil((dayCount+whereToStart)/7)*7-(dayCount+whereToStart);for(var k=1;k<=addAtEnd;k++){var dayEl=document.createElement('div');dayEl.className='day';dayEl.innerHTML=''+k;docFrag.appendChild(dayEl)}return docFrag}catch(err){console.error('calendar createDatePicker',err)}};Calendar.prototype.datesClicked=function(ev){try{var srcEl=ev.target;if(srcEl.className.indexOf('day')!==-1&&typeof srcEl.dataset.date!=='undefined'){this.inputElement.value=srcEl.dataset.date;if('createEvent'in document){var evt=document.createEvent('HTMLEvents');evt.initEvent('change',false,true);this.inputElement.dispatchEvent(evt)}var prevEl=this.datesEl.querySelector('.active');if(prevEl!==null){prevEl.classList.remove('active')}srcEl.classList.add('active');this.hideCalendar()}}catch(err){console.error('calendar datesClicked',err)}};Calendar.prototype.getCalendarTopPosition=function(element){var top=0;while(element!==document.body){top=top+element.offsetTop;element=element.offsetParent}return top};Calendar.prototype.getWeekDays=function(month,year){var firstDay=new Date(month+1+' 1 '+year);return firstDay.getDay()};Calendar.prototype.createDayLabels=function(){var days=['M','T','O','T','F','L','S'];var docFrag=document.createDocumentFragment();for(var i=0;i<days.length;i++){var dayEl=document.createElement('div');dayEl.className='day day--label';dayEl.innerHTML=days[i];docFrag.appendChild(dayEl)}return docFrag};Calendar.prototype.formatValue=function(year,monthStr,dayStr,dateFormat){try{var formattedDate=void 0;switch(dateFormat){case'DD-MM-YYYY':formattedDate=dayStr+'-'+monthStr+'-'+year;break;default:formattedDate=year+'-'+monthStr+'-'+dayStr}return formattedDate}catch(err){console.error('calendar formatValue',err)}};Calendar.prototype.createDateRegEx=function(format){var dateRegEx;var dayReg='([0-2]?\\d|3[01])';var monthReg='(0?\\d|1[0-2])';var yearReg='([12]\\d{3})';switch(format){case'DD-MM-YYYY':dateRegEx=new RegExp(dayReg+'-'+monthReg+'-'+yearReg);break;default:dateRegEx=new RegExp(yearReg+'-'+monthReg+'-'+dayReg)}return dateRegEx};return Calendar}();var CircleGraph=function(){function CircleGraph(options){this.init(options)}CircleGraph.prototype.init=function(options){try{var graphContainer=document.getElementById(options.graphID);var qlength=options.voteLength;var colorBG=options.colorBG;var colorGraph=options.colorGraph;var nameSpace='http://www.w3.org/2000/svg';var svg=document.createElementNS(nameSpace,'svg');var circlePos=15;var voteAvg=options.voteAvg;var voteAvgRounded=Number(voteAvg);var votePct=voteAvgRounded/qlength*100;var colors=[];var yesNoGraph=options.yesNoGraph;colors.push(colorBG,colorGraph);if(!options.dimensions){options.dimensions=options.device==='desktop'?100:80}if(!options.suffix){options.suffix=''}svg.setAttributeNS(null,'width',options.dimensions.toString());svg.setAttributeNS(null,'height',options.dimensions.toString());svg.setAttribute('viewBox','0 0 '+circlePos*2+' '+circlePos*2);graphContainer.appendChild(svg);for(var i=0;i<colors.length;i++){var circle=document.createElementNS(nameSpace,'circle');circle.setAttributeNS(null,'stroke',colors[i]);var strokeWidth=options.strokeWidth||2;var radius=circlePos-strokeWidth/2;var circumference=2*radius*Math.PI;if(i>0){circle.setAttribute('class','circle-graph--vote');circle.setAttributeNS(null,'transform','rotate(-90,'+circlePos+','+circlePos+')');circle.setAttributeNS(null,'stroke-dasharray',(circumference*(votePct/100)).toFixed(2)+','+circumference.toFixed(2))}this.svgDefaults(circle,circlePos,svg,strokeWidth,radius)}if(!yesNoGraph){var avg=document.createElementNS(nameSpace,'g');if(!options.decimals){options.decimals=1}svg.appendChild(avg);var avgText=document.createElementNS(nameSpace,'text');avgText.setAttributeNS(null,'x',circlePos.toString());avgText.setAttributeNS(null,'y',circlePos.toString());avgText.setAttributeNS(null,'alignment-baseline','central');avgText.setAttributeNS(null,'text-anchor','middle');avgText.setAttributeNS(null,'font-size','13');avgText.setAttributeNS(null,'style','fill: black; line-height: 1;');avg.appendChild(avgText);avgText.textContent=parseFloat(voteAvg).toFixed(options.decimals)+options.suffix}}catch(err){console.error('CircleGraph - init',err)}};CircleGraph.prototype.svgDefaults=function(circle,circlePos,svg,strokeWidth,radius){try{circle.setAttributeNS(null,'stroke-width',strokeWidth.toString());circle.setAttributeNS(null,'fill','none');circle.setAttributeNS(null,'cx',circlePos.toString());circle.setAttributeNS(null,'cy',circlePos.toString());circle.setAttributeNS(null,'r',radius);svg.appendChild(circle)}catch(err){console.error('CircleGraph - svgDefaults',err)}};return CircleGraph}();function createDot(index){var svgElem=document.createElementNS('http://www.w3.org/2000/svg','svg');svgElem.classList.add('icon-svg','bounce','bounce'+(index+1));svgElem.style.height='20px';svgElem.style.width='20px';var useElem=document.createElementNS('http://www.w3.org/2000/svg','use');useElem.setAttributeNS('http://www.w3.org/1999/xlink','href','#circle-solid');svgElem.appendChild(useElem);return svgElem}function createSpinner(cssClassParam,overrule){var spinner=document.createElement('div');var cssClasses='loader flex flex--center text-align--center';if(typeof cssClassParam!=='undefined'&&!!overrule===false){cssClasses+=' '+cssClassParam}if(typeof cssClassParam!=='undefined'&&!!overrule===true){cssClasses=cssClassParam}spinner.className=cssClasses;for(var i=0;i<3;i++){spinner.appendChild(createDot(i))}return spinner}var debounce=function(callback,wait,immediate){var timeout;return function(){var passedArgumentsargs=[];for(var _i=0;_i<arguments.length;_i++){passedArgumentsargs[_i]=arguments[_i]}var args=passedArgumentsargs;var later=function(){timeout=null;if(!immediate){callback(undefined,args)}};var callNow=immediate&&!timeout;clearTimeout(timeout);timeout=setTimeout(later,wait);if(callNow){callback(undefined,args)}}};var ebFetch=function(obj){var url=obj.url||'';var callback=obj.callback||'';var options=obj.options||{};var type=typeof options.type!=='undefined'?options.type.toLowerCase():'json';var responseType=typeof options.responseType!=='undefined'?options.responseType.toLowerCase():type;if(url===''||callback===''){throw new Error('no url passed to fetch')}window.fetch(url,options).then((function(response){if(response.status>=200&&response.status<=299){var returnValue=responseType==='json'?response.json():response.text();return returnValue}else{throw new Error('Status '+response.status)}})).then((function(returnObj){callback(returnObj)})).catch((function(err){if(obj.errorCallback){obj.errorCallback(err)}window.ebLog({component:'ebFetch',level:'ERROR',message:'Fetch - '+err})}))};function fetch$1(argObj){ebFetch(argObj)}function post(argObj){argObj.options=argObj.options||{};argObj.options.method='post';ebFetch(argObj)}var knownvendors={facebook:/facebook.com|facebook.net/,instagram:/instagram.com/,twitter:/twitter.com/,vimeo:/vimeo.com/,youtube:/youtube.com|youtu.be/};var allcookiesPurposeVendors={datawrapper:/datawrapper.dwcdn/,dpasportslive:/data-app="dpa-sportslive"|dpa.js/,flourish:/flourish.studio/,kaltura:/kaltura/,pricerunner:/pricerunner.dk|adrunner.pricerunner/,ritzau:/livewire.ritzau/};var buttonContent='<svg class="icon-svg margin-s--r" viewBox="0 0 14 14"><use xlink:href="#cog"></use></svg>Administr√©r samtykke';var buttonClass='button button--solid button--secondary margin-auto margin-m--t';var containerStyle='border: 1px solid #ddd;line-height: normal;';var ALLCOOKIESPURPOSE$1=options.ALLCOOKIESPURPOSE,privacyManagerId=options.privacyManagerId,propertyId=options.propertyId,tcfv2=options.tcfv2,tcfv2PrivacyManagerId=options.tcfv2PrivacyManagerId;var errorString=function(){return'Vi oplever, i √∏jeblikket, tekniske problemer og kan derfor ikke vise dette indhold'};var vendorString=function(vendor,vendorName,action){if(action===void 0){action=''}if(vendor===ALLCOOKIESPURPOSE$1){var mergeText='For at #MERGE# skal du acceptere <b>√òvrige cookies</b>.<br/>Det g√∏r du her:';if(action){return mergeText.replace('#MERGE#',action)}for(var acVendor in allcookiesPurposeVendors){if(allcookiesPurposeVendors[acVendor]){if(vendorName===acVendor){return mergeText.replace('#MERGE#','se dette indhold fra <b style="text-transform: capitalize;">'+vendorName+'</b>')}}}return'For at se dette indhold skal du acceptere <b>√òvrige cookies</b>.<br/>Det g√∏r du her:'}else{return'For at se dette indhold fra <b style="text-transform: capitalize;">'+vendor+'</b> skal du give samtykke til, at de m√• s√¶tte cookies.<br/>Det g√∏r du her:'}};var buttonOnclick=function(){if(tcfv2){window._sp_.loadPrivacyManagerModal(tcfv2PrivacyManagerId)}else{window._sp_.loadPrivacyManagerModal(propertyId,privacyManagerId)}};var holdbackButton=function(expects){var buttonHTML='\n    <button class="'+buttonClass+'" onclick="window._sp_.loadPrivacyManagerModal('+propertyId+', \''+privacyManagerId+'\')">\n      '+buttonContent+'\n    </button>\n    ';var tcfv2ButtonHTML='\n    <button class="'+buttonClass+'" onclick="window._sp_.loadPrivacyManagerModal('+tcfv2PrivacyManagerId+')">\n      '+buttonContent+'\n    </button>\n    ';var buttonEl=document.createElement('button');switch(expects){case'string':return tcfv2?tcfv2ButtonHTML:buttonHTML;case'element':default:buttonEl.className=buttonClass;buttonEl.innerHTML=buttonContent;buttonEl.addEventListener('click',buttonOnclick);return buttonEl}};var holdbackMessageHTML=function(vendor,vendorName,action){if(vendorName===void 0){vendorName=''}if(action===void 0){action=''}try{var innerEl=document.createElement('div');innerEl.className='grid-column widget-width--s text-align--center padding-l';innerEl.style.lineHeight='normal';if(!vendorName){vendorName=vendor}var cmpLoadStatus=window.customCMP.loadStatus;var text=cmpLoadStatus!=='error'?vendorString(vendor,vendorName,action):errorString();var button=cmpLoadStatus!=='error'?holdbackButton('html'):'';var HTML='<div class="grid-column widget-width--s text-align--center padding-l" style="'+containerStyle+'">\n      '+text+'\n      '+button+'\n      </div>';return HTML}catch(err){console.error('holdbackMessage',err)}};var holdbackMessageElement=function(vendor,vendorName,action){if(action===void 0){action=''}try{var innerEl=document.createElement('div');innerEl.className='grid-column widget-width--s text-align--center padding-l';innerEl.setAttribute('style',containerStyle);var cmpLoadStatus=window.customCMP.loadStatus;var text=cmpLoadStatus!=='error'?vendorString(vendor,vendorName,action):errorString();innerEl.innerHTML=text;if(cmpLoadStatus!=='error')innerEl.appendChild(holdbackButton('element'));return innerEl}catch(err){console.error('holdbackMessage',err)}};var holdbackMessage=function(msgOptions){var action=msgOptions.action,expects=msgOptions.expects,vendor=msgOptions.vendor,vendorName=msgOptions.vendorName;switch(expects){case'string':return holdbackMessageHTML(vendor,vendorName,action);case'element':default:return holdbackMessageElement(vendor,vendorName,action)}};var ALLCOOKIESPURPOSE=options.ALLCOOKIESPURPOSE;var vendorHandler=function(embedString){var vendor=ALLCOOKIESPURPOSE;var vendorName='';for(var acVendor in allcookiesPurposeVendors){if(embedString.match(allcookiesPurposeVendors[acVendor])){vendorName=acVendor;vendor=ALLCOOKIESPURPOSE}}if(!vendorName){for(var knownVendor in knownvendors){if(embedString.match(knownvendors[knownVendor])){vendor=vendorName=knownVendor}}}return{vendor:vendor,vendorName:vendorName}};var HtmlEmbedder=function(){function HtmlEmbedder(options){try{if(options.container===null||!options.embedInput){console.warn('HtmlEmbedder . container or embedInput missing from input object');return}var defaults={allowWithoutCheck:false};this.options=__assign(__assign({},defaults),options);this.options.vendorName=this.options.vendor?this.options.vendor:'';this.init()}catch(err){console.error('HtmlEmbedder constructor',err)}}HtmlEmbedder.prototype.init=function(){var _this=this;try{var _a=this.options,allowWithoutCheck=_a.allowWithoutCheck,embedInput_1=_a.embedInput;var _b=this.options.vendor?this.options:vendorHandler(embedInput_1),vendor_1=_b.vendor,vendorName_1=_b.vendorName;var allowWithoutCheckValue=allowWithoutCheck;if(embedInput_1.match(knownvendors.instagram)){allowWithoutCheckValue=true}if(allowWithoutCheckValue){this.embedWithConsent(embedInput_1)}else{window.jppolCMP.doWeHaveConsent({callback:function(status){if(status){_this.embedWithConsent(embedInput_1)}else{_this.embedWithoutConsent(vendor_1,vendorName_1)}},vendor:vendor_1})}}catch(err){console.error('HtmlEmbedder init',err)}};HtmlEmbedder.prototype.embedWithConsent=function(embedString){try{var container=this.options.container;while(container.firstChild){container.firstChild.remove()}var embedCode=this.htmlDecoder(embedString);container.insertAdjacentHTML('beforeend',embedCode);var scripts=container.getElementsByTagName('script');if(scripts){for(var i=scripts.length;i--;){var newScript=document.createElement('script');var curScript=scripts[i];if(curScript.src){newScript.async=true;newScript.src=curScript.src}else{newScript.textContent=curScript.textContent}container.appendChild(newScript)}}}catch(err){console.error('HtmlEmbedder embedWithConsent',err)}};HtmlEmbedder.prototype.embedWithoutConsent=function(vendor,vendorName){try{var container=this.options.container;while(container.firstChild){container.firstChild.remove()}container.appendChild(holdbackMessage({vendor:vendor,vendorName:vendorName}))}catch(err){console.error('HtmlEmbedder embedWithoutConsent',err)}};HtmlEmbedder.prototype.htmlDecoder=function(input){var doc=(new DOMParser).parseFromString(input,'text/html');return doc.documentElement.textContent};return HtmlEmbedder}();var IframeEmbedder=function(){function IframeEmbedder(options){var allowWithoutCheck=false;this.options=__assign({allowWithoutCheck:allowWithoutCheck},options);this.init()}IframeEmbedder.prototype.init=function(){var _this=this;var allowWithoutCheck=this.options.allowWithoutCheck;if(allowWithoutCheck){this.insertIframe()}else{var _a=vendorHandler(this.options.src),vendor_1=_a.vendor,vendorName_1=_a.vendorName;window.jppolCMP.doWeHaveConsent({callback:function(status){if(status){_this.insertIframe()}else{_this.withoutConsent(vendor_1,vendorName_1)}},vendor:vendor_1})}};IframeEmbedder.prototype.insertIframe=function(){var _a=this.options,attributes=_a.attributes,className=_a.className,container=_a.container,src=_a.src;var iframeEl=document.createElement('iframe');iframeEl.src=src;iframeEl.className=className;for(var attr in attributes){if(attributes[attr]){iframeEl.setAttribute(attr,attributes[attr])}}container.appendChild(iframeEl)};IframeEmbedder.prototype.withoutConsent=function(vendor,vendorName){try{var container=this.options.container;container.setAttribute('style','line-height: normal; height: auto;');container.appendChild(holdbackMessage({vendor:vendor,vendorName:vendorName}))}catch(err){console.error('HtmlEmbedder embedWithoutConsent',err)}};return IframeEmbedder}();function jsonp(argObj){try{var url=argObj.url;var callbackNamespace_1=argObj.namespace;var callbackNamespaceString=argObj.namespaceString;if(typeof url==='undefined'){throw new Error('no url passed to fetch')}var randoNum=Math.random()*999;var fnID_1='cb'+Math.round(randoNum);var jsonpScript_1=document.createElement('script');jsonpScript_1.type='application/javascript';jsonpScript_1.src=url+'&callback='+callbackNamespaceString+'.'+fnID_1;callbackNamespace_1[fnID_1]=function(){var passedArgumentsargs=[];for(var _i=0;_i<arguments.length;_i++){passedArgumentsargs[_i]=arguments[_i]}try{delete callbackNamespace_1[fnID_1];jsonpScript_1.remove();var args=Array.prototype.slice.call(passedArgumentsargs);argObj.callback.apply(undefined,args)}catch(err){throw new Error(err)}};document.head.appendChild(jsonpScript_1)}catch(err){console.error('jsonp.js ',err)}}function mergeObjects(baseObject,overidingObject){try{if(typeof overidingObject==='undefined'){console.error('overidingObject is undefined, baseObject returned');return baseObject}else if(typeof overidingObject!=='object'){throw new Error('overidingObject is not an object')}var returnObj=overidingObject;for(var key in baseObject){if(baseObject[key]){if(typeof returnObj[key]==='undefined'){returnObj[key]=baseObject[key]}else if(typeof returnObj[key]==='object'&&!Array.isArray(returnObj[key])){returnObj[key]=mergeObjects(baseObject[key],returnObj[key])}}}return returnObj}catch(err){console.error('mergeObjects ',err)}}var defaults={confirmationAlert:false,container:null,containerID:'',cookieRegExp:/hasrated=([^;]+)/,cookieholdback:false,header:'',id:0,index:0,rated:false,texts:{currency:['stjerne','stjerner'],question:'Vil du give "/text/" /count/ /currency/?',users:['l&aelig;ser:','l&aelig;sere:'],voted:'Du har allerede stemt'},type:'review',userRatingElm:'user_rating_elem_0',usrRating:'0',vendor:''};var Rating=function(){function Rating(ratingObject){var _this=this;this.settings=mergeObjects(defaults,ratingObject);this.settings.rated=this.ratedStatus();var _a=this.settings,containerID=_a.containerID,cookieholdback=_a.cookieholdback,rated=_a.rated,vendor=_a.vendor;var container=document.getElementById(containerID);this.settings.container=container;this.settings.header=this.settings.container.dataset.question;this.containerHoldback=container.querySelector('[data-container="cookieholdback"]');this.containerRating=container.querySelector('[data-container="rating"]');if(rated===false&&cookieholdback){window.jppolCMP.doWeHaveConsent({callback:function(status){if(status){_this.canRate()}else{_this.holdbackMessage()}},vendor:vendor})}else if(rated===false&&!cookieholdback){this.canRate()}else{this.hasRated()}}Rating.prototype.hasRated=function(){try{var settings=this.settings;if(settings.container!==null){settings.container.classList.remove('rating-open');settings.container.className+=' rating-closed js-rating-rated js-rating-rated'+settings.usrRating;var text=settings.usrRating==='1'?settings.texts.currency[0]:settings.texts.currency[1];document.getElementById(settings.userRatingElm).innerHTML=settings.usrRating+' '+text}}catch(err){console.error('Rating hasRated:',err)}};Rating.prototype.canRate=function(){var _this=this;var container=this.settings.container;this.containerRating.classList.remove('hidden');this.containerHoldback.classList.add('hidden');var stars=container.querySelectorAll('.ratingBtn');for(var i=0;i<stars.length;i++){var starEl=stars[i];starEl.addEventListener('click',(function(ev){_this.rate(ev.currentTarget)}))}};Rating.prototype.holdbackMessage=function(){var _a=this.settings,type=_a.type,vendor=_a.vendor;this.containerRating.classList.add('hidden');this.containerHoldback.classList.remove('hidden');var action=type==='page9'?'<b>stemme p√• dagens Side 9-pige</b>':'<b>afgive din stemme</b>';this.containerHoldback.appendChild(holdbackMessage({action:action,vendor:vendor,vendorName:type}))};Rating.prototype.rate=function(ele){try{var settings=this.settings;if(settings.rated){return}var usrRating=ele.dataset.stars;var header=settings.header;var question=settings.texts.question;var currency=settings.texts.currency;var text=question.replace(/\/text\//g,header).replace(/\/count\//g,usrRating).replace(/\/currency\//g,usrRating==='1'?currency[0]:currency[1]);this.settings.usrRating=usrRating;if(window.confirm(text)){this.submit()}}catch(err){console.error('Rating rate:',err)}};Rating.prototype.ratingSuccess=function(res){try{if(res.error===0){this.hasRated();var settings=this.settings;if(settings.confirmationAlert===true){alert('Tak! Din bed√∏mmelse er nu modtaget')}var ratingCookieMatch=document.cookie.match(settings.cookieRegExp);var ratingCookie=ratingCookieMatch===null?'':ratingCookieMatch[1]+'|';var expires=new Date;expires.setDate(expires.getDate()+365);var newRatingString=settings.id+'-'+settings.index;var newCookie='hasrated='+ratingCookie+newRatingString+'; expires='+expires+'; path=/; domain='+window.location.host+'; samesite=lax;secure';document.cookie=newCookie;localStorage.setItem('rated'+settings.id+'-'+settings.index,settings.usrRating);settings.rated=this.ratedStatus()}else{window.alert('Der opstod desv&aelig;rre en fejl. Pr&oslash;v igen senere.')}}catch(err){console.error('Rating ratingSuccess:',err)}};Rating.prototype.submit=function(){var _this=this;try{var settings=this.settings;var urlParams='esc_id='+settings.id+'&index='+settings.index+'&usr_rating='+settings.usrRating;fetch$1({callback:function(res){_this.ratingSuccess(res)},url:'/service_endpoint/rating/update?'+urlParams})}catch(err){console.error('Rating submit:',err)}};Rating.prototype.ratedStatus=function(){try{var settings=this.settings;var votedCookieMatch=document.cookie.match(settings.cookieRegExp);if(votedCookieMatch!==null){var votedCookie=votedCookieMatch[1];this.settings.usrRating=localStorage.getItem('rated'+settings.id+'-'+settings.index)||'0';return votedCookie.indexOf(settings.id+'-'+settings.index)!==-1}return false}catch(err){console.error('Rating ratedStatus:',err)}};return Rating}();var SURVEYCOOKIE='survey';function setSurveyCookie(cookieId,options){var experyDate=new Date;var valString=cookieId;for(var opt in options){if(options[opt]){if(opt==='expires'){var newDate=experyDate.setDate(experyDate.getDate()+options.expires);options[opt]=new Date(newDate).toUTCString()}valString+=';'+opt+'='+options[opt]}}var bakedCookie=SURVEYCOOKIE+'='+valString+';domain='+window.location.host+';samesite=strict;secure';document.cookie=bakedCookie}function getSurveyCookie(){var regex=new RegExp(SURVEYCOOKIE+'=(.*?)[;]');var cookieMatch=document.cookie.match(regex);if(cookieMatch!==null){return unescape(cookieMatch[1])}else{return null}}var SurveySubmitter=function(){function SurveySubmitter(options){this.answerElements={};this.showResultButton=null;this.showSurveyButton=null;this.submitButton=null;this.survey=document.getElementById(options.surveyContainer);if(this.survey===null){return}this.settings=options;this.init(options)}SurveySubmitter.prototype.init=function(options){var _this=this;var _a=this.settings,cookieholdback=_a.cookieholdback,vendor=_a.vendor;this.surveyUrl=options.surveyUrl;this.surveyId=options.surveyId;this.successCallback=options.successCallback;this.showVotes=options.showVotes;this.voteMessage=options.voteMessage;this.cookieId=currentUser()?currentUser().id:getSurveyCookie();var didParticipateUrl=this.surveyUrl+'?id='+this.surveyId;if(this.cookieId!==null){didParticipateUrl=didParticipateUrl+'&cookieId='+this.cookieId}else{this.cookieId=window.uuidv4()}fetch(didParticipateUrl).then((function(resp){return resp.json()})).then((function(resp){if(cookieholdback){window.jppolCMP.doWeHaveConsent({callback:function(status){if(_this.survey.firstChild){while(_this.survey.firstChild){_this.survey.firstChild.remove()}}_this.respHandler(resp,status)},vendor:vendor})}else{_this.respHandler(resp,true)}})).catch((function(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey init Error: '+err})}))};SurveySubmitter.prototype.respHandler=function(resp,consentStatus){if(resp.closed||!resp.open){this.drawClosed();if(this.showVotes){this.drawSurvey(resp,true)}return}if(!consentStatus){this.drawHoldback(resp);return}if(typeof resp.myVotes!=='undefined'){if(this.showVotes){this.drawSurvey(resp,true)}else{this.showThankyouMsg()}}else{this.drawSurvey(resp,false)}};SurveySubmitter.prototype.drawClosed=function(){var closedMessage=document.createElement('div');closedMessage.className='poll-closed text-align--center color--red fontweight-bold';closedMessage.appendChild(this.drawQuestion('Afstemningen er lukket'));this.survey.appendChild(closedMessage)};SurveySubmitter.prototype.drawQuestion=function(text,questionNumber){if(questionNumber===void 0){questionNumber=null}var questionElem=document.createElement('div');questionElem.className='padding-l';questionElem.innerHTML=text;if(questionNumber){var questionNumElem=document.createElement('div');questionNumElem.className='poll-questionnum bg--section fontweight-bold text-align--center margin-s--b';questionNumElem.innerHTML=String(questionNumber);questionElem.prepend(questionNumElem)}return questionElem};SurveySubmitter.prototype.drawHoldback=function(response){var vendor=this.settings.vendor;var action='<b>deltage i denne afstemning</b>';this.survey.appendChild(this.drawQuestion(response.questions.length?response.questions[0].text:'Afstemning'));this.survey.appendChild(holdbackMessage({action:action,vendor:vendor,vendorName:''}))};SurveySubmitter.prototype.drawSurvey=function(response,drawResults){var _this=this;try{var docfrag=document.createDocumentFragment();for(var i=0,qL=response.questions.length;i<qL;i++){var currentQuestion=response.questions[i];var questionNum=response.questions.length>1?i+1:null;docfrag.appendChild(this.drawQuestion(currentQuestion.text,questionNum));var inputType='radio';var icon='circle';if(currentQuestion.multipleChoice){inputType='checkbox';icon='square'}var answerContainer=document.createElement('div');var containerPadding='padding-l--b';if(drawResults||this.showVotes){containerPadding=''}answerContainer.className='poll-type-radio js-answers overflow-hidden poll-seperator '+containerPadding;for(var j=0;j<currentQuestion.answers.length;j++){var qaId=i+':'+j;var currentAnswer=currentQuestion.answers[j];var answerLine=document.createElement('div');answerLine.id='a'+j+i+'_container';answerLine.className='poll-label--border';this.answerElements[qaId]={answerLine:answerLine,currentAnswer:currentAnswer,icon:icon,inputType:inputType,qIndex:i,qLength:qL};if(drawResults){this.drawResultElements(response,answerLine,currentAnswer,qaId)}else{this.drawAnswerElements(this.answerElements[qaId],qaId)}answerContainer.appendChild(answerLine);docfrag.appendChild(answerContainer)}if(i===qL-1&&!drawResults){var submitContainer=document.createElement('div');submitContainer.className='flex flex-justify--center padding-m--t';if(i>0){this.submitButton=document.createElement('div');this.submitButton.className='button button--solid margin-m--rl';this.submitButton.innerHTML='Stem';this.submitButton.addEventListener('click',(function(){_this.collectData()}));submitContainer.appendChild(this.submitButton);docfrag.appendChild(submitContainer)}if(this.showVotes){this.showResultButton=document.createElement('div');this.showResultButton.className='button c--pointer margin-m--rl';this.showResultButton.innerHTML='Se resultat';this.showResultButton.addEventListener('click',(function(){_this.showResults(response,true)}));submitContainer.appendChild(this.showResultButton);this.showSurveyButton=document.createElement('div');this.showSurveyButton.className='button c--pointer margin-m--rl hidden';this.showSurveyButton.innerHTML='Tilbage til afstemningen';this.showSurveyButton.addEventListener('click',(function(){_this.showAnswers()}));submitContainer.appendChild(this.showSurveyButton);docfrag.appendChild(submitContainer)}}}this.survey.appendChild(docfrag)}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey drawSurvey Error: '+err})}};SurveySubmitter.prototype.showAnswers=function(){try{for(var qaId in this.answerElements){if(this.answerElements[qaId]){this.drawAnswerElements(this.answerElements[qaId],qaId)}}if(this.submitButton!==null){this.submitButton.style.display='flex'}if(this.showResultButton!==null){this.showResultButton.style.display='flex'}if(this.showSurveyButton!==null){this.showSurveyButton.style.display='none'}}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey showAnswers Error: '+err})}};SurveySubmitter.prototype.drawAnswerElements=function(answerData,qaId){var _this=this;try{var answerLine=answerData.answerLine;var currentAnswer=answerData.currentAnswer;var qIndex=answerData.qIndex;var icon=answerData.icon;var inputType=answerData.inputType;var qLength=answerData.qLength;while(answerLine.firstChild){answerLine.removeChild(answerLine.firstChild)}answerLine.classList.remove('js-poll-report-receipt');var answerInput=document.createElement('input');if(qLength===1){answerInput.addEventListener('change',(function(){_this.sendData([qaId])}))}var randomID=(Math.random()*(9123+qIndex)).toFixed(0);var answerId='a'+this.surveyId+'_a'+randomID;answerInput.name='a'+this.surveyId+'_q'+qIndex;answerInput.className='poll-input poll-input-'+inputType;answerInput.type=inputType;answerInput.value=qaId;answerInput.id=answerId;answerLine.appendChild(answerInput);var questionLabel=document.createElement('label');questionLabel.className='flex flex-align--center poll-label poll-label-checked poll-hover';questionLabel.setAttribute('for',answerId);questionLabel.innerHTML='<span class="flex flex-justify--center poll-cell poll-cell--result poll-result-placeholder poll-unchecked fs-subtitle"><svg class="icon-svg" viewBox="0 0 27 27" style="width: 20px; height: 20px;"><use xlink:href="#'+icon+'"></use></svg></span>\n            <span class="flex flex-justify--center poll-cell poll-cell--result poll-result-placeholder color--graa4 poll-checked fs-subtitle"><svg class="icon-svg" viewBox="0 0 27 27" style="width: 20px; height: 20px;"><use xlink:href="#dot-circle"></use></svg></span>\n            <span class="flex flex-justify--center poll-cell poll-cell--result poll-result-placeholder poll-input-checkmark"><svg class="icon-svg" viewBox="0 0 27 27" style="width: 20px; height: 20px;"><use xlink:href="#dot-circle"></use></svg></span>\n            <span class="flex-item--grow poll-cell poll-answer">'+currentAnswer+'</span>';answerLine.appendChild(questionLabel)}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey drawAnswerElements Error: '+err})}};SurveySubmitter.prototype.drawResultElements=function(response,answerLine,currentAnswer,qaId){try{while(answerLine.firstChild){answerLine.removeChild(answerLine.firstChild)}answerLine.classList.add('js-poll-report-receipt');var result=response.votes[qaId];var resultLabel=document.createElement('label');var resultAppendHTML='';if(response.myVotes&&response.myVotes.indexOf(qaId)!==-1){resultAppendHTML=' <span class="color--red">(Dit svar)</span>'}resultLabel.className='flex flex-align--center poll-label';resultLabel.innerHTML='<span class="poll-indicator" style="max-width: '+result+'%"></span>\n          <span class="poll-indicator-line" style="max-width: '+result+'%"></span>\n          <span class="flex-item poll-cell poll-cell--result color--section fontsize-xlarge fontweight-bold margin-m--l">'+result+'%</span>\n          <span class="flex-item flex-item--grow poll-cell poll-answer">\n          '+currentAnswer+resultAppendHTML+'</span>';answerLine.appendChild(resultLabel)}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey drawResultElements Error: '+err})}};SurveySubmitter.prototype.showResults=function(response,backOption){try{for(var qaId in this.answerElements){if(this.answerElements[qaId]){this.drawResultElements(response,this.answerElements[qaId].answerLine,this.answerElements[qaId].currentAnswer,qaId)}}if(this.submitButton!==null){this.submitButton.style.display='none'}if(this.showResultButton!==null){this.showResultButton.style.display='none'}if(this.showSurveyButton!==null){if(backOption){this.showSurveyButton.style.display='flex'}}}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey showResults Error: '+err})}};SurveySubmitter.prototype.collectData=function(){try{var multipleInputs=this.survey.querySelectorAll('input:checked');var userResponse=[];for(var i=multipleInputs.length;i--;){var el=multipleInputs[i];var val=el.value;userResponse.push(''+val)}if(userResponse.length===0){return}this.sendData(userResponse)}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey collectData Error: '+err})}};SurveySubmitter.prototype.sendData=function(userResponse){var _this=this;try{if(!this.cookieId){this.cookieId=window.uuidv4()}var result={articleId:this.surveyId,cookieId:this.cookieId,response:userResponse};fetch(this.surveyUrl,{body:JSON.stringify(result),credentials:'same-origin',headers:{'Content-Type':'application/json; charset=utf-8'},method:'post'}).then((function(resp){return resp.json()})).then((function(resp){_this.handleSuccess(JSON.parse(resp.body))})).catch((function(err){_this.handleError(err)}))}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey sendData Error: '+err})}};SurveySubmitter.prototype.handleError=function(data){if(data.status===409){alert('Du har allerede stemt.')}else{alert('Kunne ikke gemme. Pr√∏v venligst igen.')}};SurveySubmitter.prototype.handleSuccess=function(resp){try{if(this.successCallback){}setSurveyCookie(this.cookieId,{expires:365*10,path:'/'});if(this.showVotes){this.showResults(resp,false)}else{this.showThankyouMsg()}}catch(err){window.ebLog({component:'Survey',level:'ERROR',message:'Survey handleSuccess Error: '+err})}};SurveySubmitter.prototype.showThankyouMsg=function(){var message=document.createElement('h3');message.className='text-align--center';message.innerHTML=this.voteMessage;this.survey.innerHTML='';this.survey.appendChild(message)};return SurveySubmitter}();new InitEBMainJS;var stickyMenu=new StickyMenu('fnTopnavigation','ebWireframe',{offset:20,toggleClass:'js-smallMenu'});var narrowWindow=window.innerWidth<=1024;if(window.eblogin){window.eblogin.currentUser=currentUser}else{window.eblogin={currentUser:currentUser}}window.addEventListener('isEBDocReady',(function(){if('ontouchstart'in document){document.body.classList.add('cantouch')}}));exports.Calendar=Calendar;exports.CircleGraph=CircleGraph;exports.HtmlEmbedder=HtmlEmbedder;exports.IframeEmbedder=IframeEmbedder;exports.Rating=Rating;exports.SurveySubmitter=SurveySubmitter;exports.createSpinner=createSpinner;exports.debounce=debounce;exports.fetch=fetch$1;exports.holdbackButton=holdbackButton;exports.holdbackMessage=holdbackMessage;exports.holdbackMessageHTML=holdbackMessageHTML;exports.jsonp=jsonp;exports.narrowWindow=narrowWindow;exports.parseDate=parseDate;exports.post=post;exports.saveFunction=saveFunction;exports.saveFunctionToggleSave=saveFunctionToggleSave;exports.stickyMenu=stickyMenu;exports.triggerEvent=triggerEvent;Object.defineProperty(exports,'__esModule',{value:true});return exports}({});
